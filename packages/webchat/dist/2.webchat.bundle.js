(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{290:function(t,e,n){"use strict";n.r(e);var r=n(366),o=n(58),i=n(367),c=n(318);function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(t){return{type:"ADD_MESSAGE",message:t}},s=function(t){var e=t.userId,n=t.sessionId,r=t.channel;return JSON.stringify([r,e,n])},l=Object(c.c)({messages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_MESSAGE":return[].concat(u(t),[e.message])}return t},options:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{channel:"",sessionId:"",userId:""},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_OPTIONS":return e.options}return t}}),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l(void 0,{type:""}),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RESET_STATE":return l(e.state,{type:""})}return l(t,e)},p=function(t){return function(e){return function(n){var r=s(t.getState().options);switch(n.type){case"SET_OPTIONS":var o=s(n.options),i=localStorage.getItem(o);if(i)try{var c=JSON.parse(i);return e({type:"RESET_STATE",state:c})}catch(t){}}var u=e(n);return localStorage.setItem(r,JSON.stringify(t.getState())),u}}},y=function(t){var e=Object(c.d)(f,Object(c.a)(function(t){return function(e){return function(e){return function(n){switch(n.type){case"SEND_MESSAGE":var r=n.message,o=r.text,i=r.data;return t.sendMessage(o||"",i),e(a(n.message))}return e(n)}}}}(t),p));return function(t,e){e.on("output",function(e){return t.dispatch(a(e))})}(e,t),e},h=n(364),b=n(351),g=n.n(b),d=function(t){return function(t){return g()(t).setAlpha(.95).toHslString()}(g()(t).isLight()?"black":"white")},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.primaryColor||(t.primaryColor="#3f51b5"),t.primaryContrastColor||(t.primaryContrastColor=d(t.primaryColor)),t.actionColor||(t.actionColor=t.primaryColor),t.actionContrastColor||(t.actionContrastColor=d(t.actionColor)),t.lightGreyColor||(t.lightGreyColor="#e6e6e6"),t.lightGreyContrastColor||(t.lightGreyContrastColor=d(t.lightGreyColor)),t.unitSize||(t.unitSize=8),t.blockSize||(t.blockSize=48),t.fontFamily||(t.fontFamily="sans-serif"),t},v=r.a,O={minWidth:40,minHeight:40,boxSizing:"border-box"};function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=v.input(function(t){var e=t.theme;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){w(t,e,n[e])})}return t}({},O,{boxSizing:"border-box",borderRadius:e.unitSize,borderColor:"transparent",borderWidth:1,borderStyle:"solid",outline:"none",padding:e.unitSize,backgroundColor:g()("white").setAlpha(.5).toHslString(),color:g()("black").setAlpha(.8).toHslString(),transition:"border-color .3s ease-out, background-color .3s ease-out","&:focus":{backgroundColor:g()("white").setAlpha(.8).toHslString(),borderColor:e.actionColor}})});function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=v.button(function(t){var e=t.color,n=t.theme,r="primary"===e?n.primaryColor:n.actionColor,o="primary"===e?n.primaryContrastColor:n.actionContrastColor;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){k(t,e,n[e])})}return t}({},O,{borderRadius:n.unitSize,padding:"".concat(n.unitSize,"px ").concat(2*n.unitSize,"px"),boxSizing:"border-box",backgroundColor:r,color:o,textTransform:"uppercase",border:"none",cursor:"pointer",fontWeight:"bold"})}),j=v.div(function(t){var e=t.color,n=t.theme;switch(e){case"action":return{backgroundColor:n.actionColor,color:n.actionContrastColor};case"primary":return{backgroundColor:n.primaryColor,color:n.primaryContrastColor};default:return{backgroundColor:n.lightGreyColor,color:n.lightGreyContrastColor}}}),x=v(j)(function(t){var e=t.theme;return{display:"flex",alignItems:"center",flexWrap:"nowrap",paddingLeft:e.unitSize,paddingRight:e.unitSize,minHeight:e.blockSize,boxSizing:"border-box","&>*":{margin:e.unitSize}}});function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=v(x)({marginBottom:0}).withComponent("form"),A=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=this,o=(t=_(e)).call.apply(t,[this].concat(c)),n=!o||"object"!==E(o)&&"function"!=typeof o?R(r):o,T(R(R(n)),"state",{text:""}),T(R(R(n)),"handleChangeState",function(t){n.setState({text:t.target.value})}),T(R(R(n)),"handleSubmit",function(t){t.preventDefault(),t.stopPropagation();var e=n.state.text;e&&n.setState({text:""},function(){n.props.onSendMessage(e,null)})}),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,o["PureComponent"]),n=e,(r=[{key:"render",value:function(){this.props;var t=this.state.text;return o.createElement(U,{onSubmit:this.handleSubmit},o.createElement(S,{autoFocus:!0,value:t,onChange:this.handleChangeState,style:{flexGrow:1}}),o.createElement(C,{disabled:!t,type:"submit"},"send"))}}])&&P(n.prototype,r),i&&P(n,i),e}(),D=n(421),z=n.n(D);function M(){return(M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var W=function(t){return o.createElement(x,M({color:"primary"},t),o.createElement("span",null,"Logo"),o.createElement("span",{style:{flexGrow:1}},"Webchat"),o.createElement(z.a,null))},G=n(503),F=v.div(function(t){return{display:"flex",flexDirection:"column",width:400,height:600,overflow:"hidden",fontFamily:t.theme.fontFamily,"&>.content":{flexGrow:1,minHeight:0,overflowY:"auto"}}}),B=v.div(function(t){t.theme;return{overflowY:"auto",flexGrow:1,minHeight:0}});function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var K=function(t){function e(){var t,n,r,o,i,c,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=this,n=!(o=(t=J(e)).call.apply(t,[this].concat(s)))||"object"!==L(o)&&"function"!=typeof o?q(r):o,i=q(q(n)),c="state",u={theme:m()},c in i?Object.defineProperty(i,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[c]=u,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,o["PureComponent"]),n=e,i=[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.config&&t.config.settings&&t.config.settings.colorScheme;return n&&n!==e.theme.primaryColor?{theme:m({primaryColor:n})}:null}}],(r=[{key:"render",value:function(){var t=this.props,e=this.state,n=t.messages,r=t.onSendMessage,i=(t.config,N(t,["messages","onSendMessage","config"])),c=e.theme;return o.createElement(G.a,{theme:c},o.createElement(F,i,o.createElement(W,null),o.createElement(B,null,n.map(function(t){return o.createElement("p",null,t.text)})),o.createElement(A,{onSendMessage:r})))}}])&&H(n.prototype,r),i&&H(n,i),e}(),Q=Object(h.b)(function(t){return{messages:t.messages}},function(t){return{onSendMessage:function(e,n){return t({type:"SEND_MESSAGE",message:{text:e,data:n}})}}})(K);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(){return(X=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Z(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rt=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=tt(this,et(e).call(this,t));var r=t.url,o=t.options,c=new i.WebchatClient(r,o),u=y(c);return n.state={client:c,store:u,config:null},n}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(e,o["PureComponent"]),n=e,(r=[{key:"componentDidMount",value:function(){var t=this,e=this.state,n=e.client,r=e.store;n.connect().then(function(){r.dispatch({type:"SET_OPTIONS",options:n.socketOptions}),t.setState({config:n.webchatConfig})})}},{key:"componentWillUnmount",value:function(){this.state.client.disconnect()}},{key:"render",value:function(){var t=this.props,e=(t.url,t.options,Z(t,["url","options"])),n=this.state,r=n.store,i=n.config;return i?o.createElement(h.a,{store:r},o.createElement(Q,X({},e,{config:i}))):null}}])&&$(n.prototype,r),c&&$(n,c),e}(),ot=Object(r.a)(rt)({position:"fixed",bottom:64,right:64,width:480,height:640,overflow:"hidden",borderRadius:10,boxShadow:"0px 2px 5px hsla(0, 0%, 0%, .35)"});e.default=ot},367:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(c,u)}a((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var f=n(368),p=n(396),y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=e.getEndpointBaseUrl(t),i=e.getEndpointUrlToken(t),u=e.createWebchatOptions(n);return o(this,c(e).call(this,r,i,u))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,f.SocketClient),a(e,null,[{key:"createDefaultWebchatOptions",value:function(){return{channel:"webchat-client"}}},{key:"createWebchatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},e.createDefaultWebchatOptions(),t)}},{key:"fetchWebchatConfig",value:function(t){return l(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.get(t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}))}},{key:"getEndpointBaseUrl",value:function(t){var e=t.split("/");return e.splice(e.length-1,1),e.join("/")}},{key:"getEndpointUrlToken",value:function(t){return t.split("/").pop()}}]),a(e,[{key:"connect",value:function(){var t=this,n=Object.create(null,{connect:{get:function(){return i(c(e.prototype),"connect",t)}}});return l(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchWebchatConfig(this.webchatConfigUrl);case 2:return r=t.sent,this.webchatConfig=r,t.abrupt("return",n.connect.call(this));case 5:case"end":return t.stop()}},t,this)}))}},{key:"webchatConfigUrl",get:function(){return"".concat(this.socketUrl,"/").concat(this.socketURLToken)}}]),e}();e.WebchatClient=y},368:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(c,u)}a((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var s=n(369),l=n(370),f=n(393),p=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,c(e).call(this))).messageBuffer=[],o.socketUrl=t,o.socketURLToken=n,o.socketOptions=e.completeSocketOptions(r),o.updateLastUsed(),o}var n,r,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s.EventEmitter),n=e,p=[{key:"createDefaultSocketOptions",value:function(){return{channel:"socket-client",userId:"user-".concat(f.v4()),sessionId:"session-".concat(f.v4()),expiresIn:null,forceWebsockets:!1,interval:1e4,passthroughIP:null,reconnection:!0,reloadFlow:!1,resetContext:!1,resetFlow:!1,resetState:!1}}},{key:"completeSocketOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},e.createDefaultSocketOptions(),t)}}],(r=[{key:"flushMessageBuffer",value:function(){if(this.messageBuffer.length>0)if(this.connected){console.log("[SocketClient] Starting to send your buffered messages...");var t=!0,e=!1,n=void 0;try{for(var r,o=this.messageBuffer[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.sendMessage(i.text,i.data)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}console.log("[SocketClient] Finished sending ".concat(this.messageBuffer.length," buffered messages.")),this.messageBuffer=[]}else console.log("[SocketClient] Could not send your buffered messages because we are not connected")}},{key:"setupReconnectInterval",value:function(){var t=this;this.socketReconnectInterval=setInterval(function(){return a(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connected){t.next=12;break}return console.log("[SocketClient] Trying to reconnect"),t.prev=2,t.next=5,this.connect();case 5:console.log("[SocketClient] Successfully reconnected."),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error("[SocketClient] Failed to reconnect, error was: ".concat(JSON.stringify(t.t0)));case 11:case 12:case"end":return t.stop()}},t,this,[[2,8]])}))},this.socketOptions.interval)}},{key:"updateLastUsed",value:function(){this.lastUsed=Date.now()}},{key:"connect",value:function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=l.connect(this.socketUrl,{reconnection:!1,upgrade:!0,transports:this.socketOptions.forceWebsockets?["websocket"]:["polling","websocket"]})).on("error",function(t){return n.emit("error",t)}),e.on("exception",function(t){return n.emit("exception",t)}),e.on("typingStatus",function(t){return n.emit("typingStatus",t)}),e.on("finalPing",function(t){return n.emit("finalPing",t)}),e.on("output",function(t){if(t&&"error"===t.type)return n.emit("error",t.data.error);if(t&&"output"===t.type){var e=t.data;n.emit("output",e)}}),t.abrupt("return",new Promise(function(t,r){e.on("connect_error",function(){return r(new Error("[SocketClient] Error connecting"))}),e.on("connect_timeout",function(){return r(new Error("[SocketClient] Error connecting"))}),e.on("connect",function(){console.log("[SocketClient] connection established"),n.socket=e,n.flushMessageBuffer(),n.socketOptions.reconnection&&n.setupReconnectInterval(),t(n)})}));case 7:case"end":return t.stop()}},t,this)}))}},{key:"disconnect",value:function(){return clearInterval(this.socketReconnectInterval),this.socketReconnectInterval=null,this.socket&&(this.socket.disconnect(),this.socket=null),this}},{key:"sendMessage",value:function(t,e){return this.connected?(this.updateLastUsed(),this.socket.emit("processInput",{URLToken:this.socketURLToken,userId:this.socketOptions.userId,sessionId:this.socketOptions.sessionId,source:"device",passthroughIP:this.socketOptions.passthroughIP,reloadFlow:!!this.socketOptions.reloadFlow,resetFlow:!!this.socketOptions.resetFlow,resetState:!!this.socketOptions.resetState,resetContext:!!this.socketOptions.resetContext,text:t,data:e})):(this.messageBuffer.push({text:t,data:e}),console.log("[SocketClient] Unable to directly send your message since we are not connected. Your message will be buffered and sent later on.")),this}},{key:"connected",get:function(){return!!this.socket&&this.socket.connected}},{key:"expired",get:function(){return null!==this.socketOptions.expiresIn&&Date.now()-this.lastUsed>this.socketOptions.expiresIn}}])&&o(n.prototype,r),p&&o(n,p),e}();e.SocketClient=p},390:function(t,e){}}]);